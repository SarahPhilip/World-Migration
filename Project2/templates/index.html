<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Migration</title>
    <!-- <link rel="stylesheet" href="leaflet.css" /> -->
     <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin="" />
    

    <style>
    html,body{
        margin: 0;
        padding: 0;
    }
    #map{
        position: absolute;
        height: 100%;
        width: 100%;
    }
    #event{
        position: absolute;
        top: 50px;
        right: 600px;
        height: 100px;
        width: 400px;
        z-index: 10000;
    }
    .btn{
        border-color:gray;
        border-width: 2px;
        background-color:white;
   }
    </style>
</head>

<body>
    <div id="map"></div>
    <div id='event'>
        <input type="button" value="setData" class="btn" onclick="setData()">
        <input type="button" value="hide" class="btn" onclick="hide()">
        <input type="button" value="show" class="btn" onclick="show()">
        <input type="button" value="pause" class="btn" onclick="pause()">
        <input type="button" value="play" class="btn" onclick="play()">
        <input type="button" value="destroy" class="btn" onclick="destroy()">
    </div>
    <script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js" integrity="sha512-tAGcCfR4Sc5ZP5ZoVz0quoZDYX5aCtEm/eu1KhSLj2c9eFrylXZknQYmxUssFaVJKvvc0dJQixhGjG2yXWiV9Q==" crossorigin=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.5.0/d3.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src='../static/js/leaflet.migrationLayer.js'></script>
    <script src='../static/js/app.js'></script>
    
    <script>
        var lrmap = L.map('map').setView([15.5994, -28.6731], 3);
        L.tileLayer('https://api.tiles.mapbox.com/v4/mapbox.dark/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoic2hhbWVldGhhIiwiYSI6ImNqbjExdjczaTI1Y3czcG5vaDVvZHVqcnYifQ.XgXeLUf_4pa8v6UmZDo_Iw')
        .addTo(lrmap);

    d3.json("data_for_plugin_2017.json", function(response) {
      // console.log(response);
      var data = response;
   
// instead of the following, consider loading json file here
 //        var data = [{'to': [30.0, -3.5],
 //  'from': [35.0, -6.0],
 //  'color': '#ff3a31',
 //  'migrants': '28,008',
 //  'year': 2015},
 // {'to': [44.25, -12.1667],
 //  'from': [35.0, -6.0],
 //  'color': '#ff3a31',
 //  'migrants': '145',
 //  'year': 2015},
 // {'to': [43.0, 11.5],
 //  'from': [48.0, 15.0],
 //  'color': '#ff3a31',
 //  'migrants': '265',
 //  'year': 2015},
 // {'to': [39.0, 15.0],
 //  'from': [30.0, -20.0],
 //  'color': '#ff3a31',
 //  'migrants': '324',
 //  'year': 2015},
 // {'to': [38.0, 8.0],
 //  'from': [48.0, 15.0],
 //  'color': '#ff3a31',
 //  'migrants': '145',
 //  'year': 2015},
 // {'to': [38.0, 1.0],
 //  'from': [35.0, -6.0],
 //  'color': '#ff3a31',
 //  'migrants': '39,935',
 //  'year': 2015},
 // {'to': [47.0, -20.0],
 //  'from': [77.0, 20.0],
 //  'color': '#ff3a31',
 //  'migrants': '1,581',
 //  'year': 2015},
 // {'to': [34.0, -13.5],
 //  'from': [30.0, -20.0],
 //  'color': '#ff3a31',
 //  'migrants': '36,753',
 //  'year': 2015},
 // {'to': [57.55, -20.2833],
 //  'from': [-97.0, 38.0],
 //  'color': '#ff3a31',
 //  'migrants': '49',
 //  'year': 2015},
 // {'to': [45.1667, -12.8333],
 //  'from': [47.0, -20.0],
 //  'color': '#ff3a31',
 //  'migrants': '5,318',
 //  'year': 2015},
 // {'to': [35.0, -18.25],
 //  'from': [30.0, -20.0],
 //  'color': '#ff3a31',
 //  'migrants': '27,254',
 //  'year': 2015},
 // {'to': [55.6, -21.1],
 //  'from': [45.1667, -12.8333],
 //  'color': '#ff3a31',
 //  'migrants': '6,507',
 //  'year': 2015},
 // {'to': [30.0, -2.0],
 //  'from': [35.0, -6.0],
 //  'color': '#ff3a31',
 //  'migrants': '42,776',
 //  'year': 2015},
 // {'to': [55.6667, -4.5833],
 //  'from': [-2.0, 54.0],
 //  'color': '#ff3a31',
 //  'migrants': '290',
 //  'year': 2015},
 // {'to': [49.0, 10.0],
 //  'from': [48.0, 15.0],
 //  'color': '#ff3a31',
 //  'migrants': '5,883',
 //  'year': 2015},];
        
        var data2=[{"from":[-73.875523,40.781063],"to":[-80.247887,25.792296],"labels":["New York","Maima"],"color":"#05ffd9"},{"from":[-73.875523,40.781063],"to":[-118.2705,33.9984],"labels":[null,"Los Angeles"],"color":"#00ccff"},{"from":[-73.875523,40.781063],"to":[-87.724088,41.917846],"labels":[null,"Chicago"],"color":"#ffc726"},{"from":[-73.875523,40.781063],"to":[-71.058437,42.35902],"labels":[null,"Boston"],"color":"#e9ff20"},{"from":[-73.875523,40.781063],"to":[-75.683057,45.42172],"labels":[null,"Ottawa"],"color":"#99ff1b"}];

        var migrationLayer = new L.migrationLayer({
            map: lrmap,
            data: data,
            pulseRadius:30,
            pulseBorderWidth:3,
            arcWidth:1,
            arcLabel:true,
            arcLabelFont:'10px sans-serif',
            }
        );
        migrationLayer.addTo(lrmap);

        function setData(){
            migrationLayer.setData(data2);
        }
        function hide(){
            migrationLayer.hide();
        }
        function show(){
            migrationLayer.show();
        }
        function play(){
            migrationLayer.play();
        }
        function pause(){
            migrationLayer.pause();
        }
        function destroy() {
            migrationLayer.destroy();
        }
     });
    </script>


    
     
  <!-- // <script src=".js/scripts.js"></script> -->



    
    <!-- // <script src="{{ url_for('static', filename='js/leaflet.migrationLayer.js') }}"></script>
    // <script src="{{ url_for('static', filename='js/app.js') }}"></script> -->
</body>

</html>